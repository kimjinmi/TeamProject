<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.board">
	
	
	<select id="selectByBno" parameterType="int" resultType="board">
		select bno, btitle, bcontent, bdate, memail, to_char(bdate, 'YYYY-MM-DD HH24:Mi:SS') bdate
		from board
		where bno = #{bno}
	</select>
	
	<!-- 선: 좋아요 순으로 불러오기 ranking 총 데이터 -->
		<!-- 좋아요순은 데이터 12개 -->
	<select id="selectLikeAll" resultType="board">	
		select rownum as rnum,  bno, btitle, bcontent, bdate, blike, cno, bimage, mnickname, mmyimage
		from(select bno, btitle, bcontent, bdate, blike, cno, bimage, mnickname, mmyimage
       			 from board b, member m
       			 where b.memail = m.memail
       			 order by blike desc)
		where rownum &lt;= 12
	</select>
	
	<!-- 선: 좋아요 순으로 불러오기 ranking 카테고리별 데이터 -->
	<!-- 좋아요순은 데이터 12개 -->
	<select id="selectLikeCategory" parameterType="int" resultType="board">
		select rownum as rnum,  bno, btitle, bcontent, bdate, blike, cno, bimage, mnickname, mmyimage
		from(select bno, btitle, bcontent, bdate, blike, cno, bimage, mnickname, mmyimage
       			 from board b, member m
       			 where b.memail = m.memail and cno = #{cno} 
       			 order by blike desc)
		where rownum &lt;= 12
	</select>
	
	<!-- 선: 최신순으로 불러오기 contents 총 데이터 -->
	<!-- 최신순은 나와야되는 데이터 수 제한없음 -->
	<select id="selectNewAll" resultType="board">	
	  	 select bno, btitle, bcontent, bdate, blike, b.cno, ccontent, bimage, mnickname, mmyimage
         from board b, member m, category c
       	 where b.memail = m.memail and b.cno = c.cno
       	 order by bdate desc
	</select>
	
	<!-- 선: 최신순으로 불러오기 contents 카테고리별 데이터 -->
	<!-- 최신순은 나와야되는 데이터 수 제한없음 -->
	<select id="selectNewCategory" parameterType="int" resultType="board">
		select bno, btitle, bcontent, bdate, blike, b.cno, ccontent, bimage, mnickname, mmyimage
       	from board b, member m, category c
       	where b.memail = m.memail and b.cno = #{cno} and b.cno = c.cno 
       	order by bdate desc
	</select>
	
	<select id="selectUserBoard" parameterType="String" resultType="board">
		select bno,btitle, bcontent, bdate, blike, bimage, mnickname
		from board, member
		where board.memail = member.memail AND board.memail = #{memail} 
		order by bdate desc
		
		</select>
		
		<!-- 영아 - 보드 최신순 게시물 -->
		<select id="selectBtitleAll" resultType="board">
		select btitle 
		from ( select btitle  
		from board 
		order by bdate desc) 
		where rownum &lt; = 4
		</select>

	<select id="countAll" resultType="int">
		select count(*) 
		from board
	</select>
	

	<select id="selectBoardComment" parameterType="int" resultType="reply">
		select rno, rcontent, reply.memail, member.mnickname, rdate
		from board, reply, member
		where board.bno = reply.bno AND board.bno = #{bno} AND reply.memail = member.memail
	</select>

</mapper>

