<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.category">
	
		<select id="selectAll" resultType="category">	
			select cno, ccontent
			from category
			Order by cno asc
		</select>
		
		<select id="selectMurl" parameterType="String" resultType="category">	
			select distinct c.cno, c.ccontent, b.murl
			from category c, board b
			where b.cno = c.cno and b.murl=#{murl}
			order by c.cno asc
		</select>
		
		<!-- 진미 : 카테고리랑 카테고리별 개수 구하는 쿼리 -->
		<select id="selectAllCount" resultType="category">	
			SELECT cno, ccontent, ccount
			FROM(SELECT b.cno con, c.ccontent ccontent, c.cno, count(b.cno) ccount, count(c.ccontent), count(c.cno)
				FROM category c, board b
				WHERE c.cno = b.cno(+)
				GROUP BY b.cno, c.ccontent, c.cno
				ORDER BY b.cno ASC)
	</select>
</mapper>

